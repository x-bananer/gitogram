{"remainingRequest":"/Users/xeniya/Desktop/gitogram/node_modules/thread-loader/dist/cjs.js!/Users/xeniya/Desktop/gitogram/node_modules/babel-loader/lib/index.js!/Users/xeniya/Desktop/gitogram/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xeniya/Desktop/gitogram/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/xeniya/Desktop/gitogram/src/pages/auth/auth.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/xeniya/Desktop/gitogram/src/pages/auth/auth.vue","mtime":1642488971858},{"path":"/Users/xeniya/Desktop/gitogram/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xeniya/Desktop/gitogram/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xeniya/Desktop/gitogram/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/xeniya/Desktop/gitogram/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xeniya/Desktop/gitogram/node_modules/vue-loader-v16/dist/index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy94ZW5peWEvRGVza3RvcC9naXRvZ3JhbS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgeyBpY29uIH0gZnJvbSAnLi4vLi4vaWNvbnMvJzsKaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi9lbnYnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0F1dGgnLAogIGNvbXBvbmVudHM6IHsKICAgIGljb246IGljb24KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4ge307CiAgfSwKICBjb21wdXRlZDoge30sCiAgbWV0aG9kczogewogICAgb25BdXRoOiBmdW5jdGlvbiBvbkF1dGgoKSB7CiAgICAgIHZhciBnaXRodWJBdXRoQXBpID0gJ2h0dHBzOi8vZ2l0aHViLmNvbS9sb2dpbi9vYXV0aC9hdXRob3JpemUnOwogICAgICB2YXIgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOwogICAgICBwYXJhbXMuYXBwZW5kKCdjbGllbnRfaWQnLCBlbnYuY2xpZW50SWQpOwogICAgICBwYXJhbXMuYXBwZW5kKCdzY29wZScsICdyZXBvLHVzZXInKTsKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAiIi5jb25jYXQoZ2l0aHViQXV0aEFwaSwgIj8iKS5jb25jYXQocGFyYW1zKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBjb2RlLCByZXNwb25zZSwgX3lpZWxkJHJlc3BvbnNlJGpzb24sIHRva2VuOwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvZGUgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpLmdldCgnY29kZScpOwoKICAgICAgICAgICAgICBpZiAoIWNvZGUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKCdodHRwczovL3dlYmRldi1hcGkubG9mdHNjaG9vbC5jb20vZ2l0aHViJywgewogICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgIGNsaWVudElkOiBlbnYuY2xpZW50SWQsCiAgICAgICAgICAgICAgICAgIGNvZGU6IGNvZGUsCiAgICAgICAgICAgICAgICAgIGNsaWVudFNlY3JldDogZW52LmNsaWVudFNlY3JldAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBfeWllbGQkcmVzcG9uc2UkanNvbiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgdG9rZW4gPSBfeWllbGQkcmVzcG9uc2UkanNvbi50b2tlbjsKICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCB0b2tlbik7CgogICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgICAgICBuYW1lOiAnZmVlZHMnCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE0OwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMik7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coX2NvbnRleHQudDApOwoKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1syLCAxNF1dKTsKICAgIH0pKSgpOwogIH0KfTs="},{"version":3,"sources":["/Users/xeniya/Desktop/gitogram/src/pages/auth/auth.vue"],"names":[],"mappings":";;;;;;;;;AAyBA,SAAS,IAAT,QAAqB,cAArB;AACA,OAAO,GAAP,MAAgB,cAAhB;AACA,eAAe;AACb,EAAA,IAAI,EAAE,MADO;AAEb,EAAA,UAAU,EAAE;AACV,IAAA,IAAG,EAAH;AADU,GAFC;AAKb,EAAA,IALa,kBAKL;AACN,WAAO,EAAP;AACD,GAPY;AAQb,EAAA,QAAQ,EAAE,EARG;AASb,EAAA,OAAO,EAAE;AACP,IAAA,MADO,oBACG;AACR,UAAM,aAAY,GAAI,0CAAtB;AACA,UAAM,MAAK,GAAI,IAAI,eAAJ,EAAf;AACA,MAAA,MAAM,CAAC,MAAP,CAAc,WAAd,EAA2B,GAAG,CAAC,QAA/B;AACA,MAAA,MAAM,CAAC,MAAP,CAAc,OAAd,EAAuB,WAAvB;AACA,MAAA,MAAM,CAAC,QAAP,CAAgB,IAAhB,aAA0B,aAA1B,cAA2C,MAA3C;AACF;AAPO,GATI;AAkBP,EAAA,OAlBO,qBAkBI;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACT,cAAA,IADS,GACF,IAAI,eAAJ,CAAoB,MAAM,CAAC,QAAP,CAAgB,MAApC,EAA4C,GAA5C,CAAgD,MAAhD,CADE;;AAAA,mBAEX,IAFW;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,qBAIY,KAAK,CAC1B,0CAD0B,EACkB;AAC1C,gBAAA,MAAM,EAAE,MADkC;AAE1C,gBAAA,OAAO,EAAE;AACP,kCAAgB;AADT,iBAFiC;AAK1C,gBAAA,IAAI,EAAE,IAAI,CAAC,SAAL,CAAe;AACnB,kBAAA,QAAQ,EAAE,GAAG,CAAC,QADK;AACK,kBAAA,IAAI,EAAJ,IADL;AACW,kBAAA,YAAY,EAAE,GAAG,CAAC;AAD7B,iBAAf;AALoC,eADlB,CAJjB;;AAAA;AAIL,cAAA,QAJK;AAAA;AAAA,qBAea,QAAQ,CAAC,IAAT,EAfb;;AAAA;AAAA;AAeH,cAAA,KAfG,wBAeH,KAfG;AAgBX,cAAA,YAAY,CAAC,OAAb,CAAqB,OAArB,EAA8B,KAA9B;;AACA,cAAA,KAAI,CAAC,OAAL,CAAa,OAAb,CAAqB;AAAE,gBAAA,IAAI,EAAE;AAAR,eAArB;;AAjBW;AAAA;;AAAA;AAAA;AAAA;AAmBX,cAAA,OAAO,CAAC,GAAR;;AAnBW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsBjB;AAxCa,CAAf","sourcesContent":["<template>\n  <div class=\"c-auth\">\n    <div class=\"auth__desc\">\n      <div class=\"auth__title\">\n        <icon name=\"logo\" />\n      </div>\n      <div class=\"auth__text\">\n        More than just one repository. This is our digital world\n      </div>\n    </div>\n    <button class=\"btn-auth\" @click=\"onAuth\">\n      <div class=\"btn-auth__content\">\n        <div class=\"btn-auth__title\">Authorize with github</div>\n        <div class=\"btn-auth__icon\">\n          <icon name=\"auth\" />\n        </div>\n      </div>\n    </button>\n    <div class=\"auth__img\">\n      <img src=\"../../images/cover.png\" alt=\"Gitogram\" class=\"auth__ico\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { icon } from '../../icons/'\nimport env from '../../../env'\nexport default {\n  name: 'Auth',\n  components: {\n    icon\n  },\n  data () {\n    return {}\n  },\n  computed: {},\n  methods: {\n    onAuth () {\n      const githubAuthApi = 'https://github.com/login/oauth/authorize'\n      const params = new URLSearchParams()\n      params.append('client_id', env.clientId)\n      params.append('scope', 'repo,user')\n      window.location.href = `${githubAuthApi}?${params}`\n    }\n  },\n  async created () {\n    const code = new URLSearchParams(window.location.search).get('code')\n    if (code) {\n      try {\n        const response = await fetch(\n          'https://webdev-api.loftschool.com/github', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              clientId: env.clientId, code, clientSecret: env.clientSecret\n            })\n          }\n        )\n        const { token } = await response.json()\n        localStorage.setItem('token', token)\n        this.$router.replace({ name: 'feeds' })\n      } catch (error) {\n        console.log(error)\n      }\n    }\n  }\n}\n</script>\n\n<style src=\"./auth.scss\" lang=\"scss\" scoped></style>\n"],"sourceRoot":""}]}
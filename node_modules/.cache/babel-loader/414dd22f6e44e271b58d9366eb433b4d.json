{"remainingRequest":"/Users/xeniya/Desktop/gitogram/node_modules/babel-loader/lib/index.js!/Users/xeniya/Desktop/gitogram/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/xeniya/Desktop/gitogram/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xeniya/Desktop/gitogram/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/xeniya/Desktop/gitogram/src/components/storiesSlider/storiesSlider.vue?vue&type=template&id=074628f9&scoped=true","dependencies":[{"path":"/Users/xeniya/Desktop/gitogram/src/components/storiesSlider/storiesSlider.vue","mtime":1642440951449},{"path":"/Users/xeniya/Desktop/gitogram/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xeniya/Desktop/gitogram/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/xeniya/Desktop/gitogram/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1628298225000},{"path":"/Users/xeniya/Desktop/gitogram/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xeniya/Desktop/gitogram/node_modules/vue-loader-v16/dist/index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVuZGVyTGlzdCBhcyBfcmVuZGVyTGlzdCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlRWxlbWVudEJsb2NrIGFzIF9jcmVhdGVFbGVtZW50QmxvY2ssIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIHdpdGhTY29wZUlkIGFzIF93aXRoU2NvcGVJZCwgcHVzaFNjb3BlSWQgYXMgX3B1c2hTY29wZUlkLCBwb3BTY29wZUlkIGFzIF9wb3BTY29wZUlkIH0gZnJvbSAidnVlIjsKCl9wdXNoU2NvcGVJZCgiZGF0YS12LTA3NDYyOGY5Iik7Cgp2YXIgX2hvaXN0ZWRfMSA9IHsKICBjbGFzczogImMtc3Rvcmllcy1zbGlkZXIiCn07CnZhciBfaG9pc3RlZF8yID0gewogIGNsYXNzOiAiYy1zdG9yaWVzLXNsaWRlcl9fY29udGFpbmVyIgp9Owp2YXIgX2hvaXN0ZWRfMyA9IHsKICBjbGFzczogInN0b3JpZXMiLAogIHJlZjogInNsaWRlciIKfTsKCl9wb3BTY29wZUlkKCk7CgpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHZhciBfY29tcG9uZW50X3NsaWRlU3RvcnkgPSBfcmVzb2x2ZUNvbXBvbmVudCgic2xpZGVTdG9yeSIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMiwgW19jcmVhdGVFbGVtZW50Vk5vZGUoInVsIiwgX2hvaXN0ZWRfMywgWyhfb3BlbkJsb2NrKHRydWUpLCBfY3JlYXRlRWxlbWVudEJsb2NrKF9GcmFnbWVudCwgbnVsbCwgX3JlbmRlckxpc3QoX2N0eC50cmVuZGluZ3MsIGZ1bmN0aW9uICh0cmVuZGluZywgbmR4KSB7CiAgICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJsaSIsIHsKICAgICAgY2xhc3M6ICJzdG9yaWVzX19pdGVtIiwKICAgICAga2V5OiB0cmVuZGluZy5pZCwKICAgICAgcmVmOiAiaXRlbSIKICAgIH0sIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9zbGlkZVN0b3J5LCB7CiAgICAgIGRhdGE6ICRvcHRpb25zLmdldFN0b3J5RGF0YSh0cmVuZGluZyksCiAgICAgIGFjdGl2ZTogJGRhdGEuc2xpZGVOZHggPT09IG5keCwKICAgICAgbG9hZGluZzogJGRhdGEuc2xpZGVOZHggPT09IG5keCAmJiAkZGF0YS5sb2FkaW5nLAogICAgICBidG5zU2hvd246ICRvcHRpb25zLmFjdGl2ZUJ0bnMsCiAgICAgIG9uT25OZXh0U2xpZGU6IGZ1bmN0aW9uIG9uT25OZXh0U2xpZGUoJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuICRvcHRpb25zLmhhbmRsZVNsaWRlKG5keCArIDEpOwogICAgICB9LAogICAgICBvbk9uUHJldlNsaWRlOiBmdW5jdGlvbiBvbk9uUHJldlNsaWRlKCRldmVudCkgewogICAgICAgIHJldHVybiAkb3B0aW9ucy5oYW5kbGVTbGlkZShuZHggLSAxKTsKICAgICAgfSwKICAgICAgb25PblByb2dyZXNzRmluaXNoOiBmdW5jdGlvbiBvbk9uUHJvZ3Jlc3NGaW5pc2goJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuICRvcHRpb25zLmhhbmRsZVNsaWRlT25Qcm9ncmVzc0ZpbmlzaChuZHggKyAxKTsKICAgICAgfSwKICAgICAgb25PbkZvbGxvdzogX2N0eC5zdGFyUmVwbywKICAgICAgb25PblVuZm9sbG93OiBfY3R4LnVuU3RhclJlcG8KICAgIH0sIG51bGwsIDgKICAgIC8qIFBST1BTICovCiAgICAsIFsiZGF0YSIsICJhY3RpdmUiLCAibG9hZGluZyIsICJidG5zU2hvd24iLCAib25Pbk5leHRTbGlkZSIsICJvbk9uUHJldlNsaWRlIiwgIm9uT25Qcm9ncmVzc0ZpbmlzaCIsICJvbk9uRm9sbG93IiwgIm9uT25VbmZvbGxvdyJdKV0sIDUxMgogICAgLyogTkVFRF9QQVRDSCAqLwogICAgKTsKICB9KSwgMTI4CiAgLyogS0VZRURfRlJBR01FTlQgKi8KICApKV0sIDUxMgogIC8qIE5FRURfUEFUQ0ggKi8KICApXSldKTsKfQ=="},{"version":3,"sources":["/Users/xeniya/Desktop/gitogram/src/components/storiesSlider/storiesSlider.vue"],"names":[],"mappings":";;;;;AACO,EAAA,KAAK,EAAC;;;AACJ,EAAA,KAAK,EAAC;;;AACL,EAAA,KAAK,EAAC,S;AAAU,EAAA,GAAG,EAAC;;;;;;;;uBAF5B,mBAAA,CAuBM,KAvBN,EAAA,UAAA,EAuBM,CAtBJ,mBAAA,CAqBM,KArBN,EAAA,UAAA,EAqBM,CApBJ,mBAAA,CAmBK,IAnBL,EAAA,UAAA,EAmBK,E,kBAlBH,mBAAA,CAiBK,SAjBL,EAiBK,IAjBL,EAiBK,WAAA,CAfuB,IAAA,CAAA,SAevB,EAfgC,UAA3B,QAA2B,EAAjB,GAAiB,EAAd;yBAFvB,mBAAA,CAiBK,IAjBL,EAiBK;AAhBH,MAAA,KAAK,EAAC,eAgBH;AAdF,MAAA,GAAG,EAAE,QAAQ,CAAC,EAcZ;AAbH,MAAA,GAAG,EAAC;AAaD,KAjBL,E,CAME,YAAA,CAUE,qBAVF,EAUE;AATC,MAAA,IAAI,EAAE,QAAA,CAAA,YAAA,CAAa,QAAb,CASP;AARC,MAAA,MAAM,EAAE,KAAA,CAAA,QAAA,KAAa,GAQtB;AAPC,MAAA,OAAO,EAAE,KAAA,CAAA,QAAA,KAAa,GAAb,IAAoB,KAAA,CAAA,OAO9B;AANC,MAAA,SAAS,EAAE,QAAA,CAAA,UAMZ;AALC,MAAA,aAAW,EAAA,uBAAA,MAAA;AAAA,eAAE,QAAA,CAAA,WAAA,CAAY,GAAG,GAAA,CAAf,CAAF;AAAA,OAKZ;AAJC,MAAA,aAAW,EAAA,uBAAA,MAAA;AAAA,eAAE,QAAA,CAAA,WAAA,CAAY,GAAG,GAAA,CAAf,CAAF;AAAA,OAIZ;AAHC,MAAA,kBAAgB,EAAA,4BAAA,MAAA;AAAA,eAAE,QAAA,CAAA,2BAAA,CAA4B,GAAG,GAAA,CAA/B,CAAF;AAAA,OAGjB;AAFC,MAAA,UAAQ,EAAE,IAAA,CAAA,QAEX;AADC,MAAA,YAAU,EAAE,IAAA,CAAA;AACb,KAVF,E,IAAA,E;;AAAA,M,gIAAA,C,CANF,E;;AAAA,K;GAiBK,CAjBL,E;;AAAA,GAkBG,EAnBL,E;;AAAA,GAoBI,CArBN,CAsBI,CAvBN,C","sourcesContent":["<template>\n  <div class=\"c-stories-slider\">\n    <div class=\"c-stories-slider__container\">\n      <ul class=\"stories\" ref=\"slider\">\n        <li\n          class=\"stories__item\"\n          v-for=\"(trending, ndx) in trendings\"\n          :key=\"trending.id\"\n          ref=\"item\"\n        >\n          <slideStory\n            :data=\"getStoryData(trending)\"\n            :active=\"slideNdx === ndx\"\n            :loading=\"slideNdx === ndx && loading\"\n            :btnsShown=\"activeBtns\"\n            @onNextSlide=\"handleSlide(ndx + 1)\"\n            @onPrevSlide=\"handleSlide(ndx - 1)\"\n            @onProgressFinish=\"handleSlideOnProgressFinish(ndx + 1)\"\n            @onFollow=\"starRepo\"\n            @onUnfollow=\"unStarRepo\"\n          />\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport slideStory from '../slideStory/slideStory.vue'\nimport { mapState, mapActions } from 'vuex'\n\nexport default {\n  name: 'storiesSlider',\n  components: {\n    slideStory\n  },\n  props: {\n    initialSlide: {\n      type: Number\n    }\n  },\n  data () {\n    return {\n      slideNdx: 0,\n      sliderPosition: 0,\n      loading: false,\n      btnsShown: true\n    }\n  },\n  computed: {\n    ...mapState({\n      trendings: (state) => state.data\n    }),\n    activeBtns () {\n      if (this.btnsShown === false) return []\n      if (this.slideNdx === 0) return ['next']\n      if (this.slideNdx === this.trendings.length - 1) return ['prev']\n      return ['next', 'prev']\n    }\n  },\n  methods: {\n    ...mapActions({\n      fetchTrendings: 'fetchTrendings',\n      fetchReadme: 'fetchReadme',\n      starRepo: 'starRepo',\n      unStarRepo: 'unStarRepo'\n    }),\n    async fetchReadmeForActiveSlide () {\n      const { id, owner, name } = this.trendings[this.slideNdx]\n      await this.fetchReadme({ id, owner: owner.login, repo: name })\n    },\n    getStoryData (obj) {\n      return {\n        id: obj.id,\n        userAvatar: obj.owner?.avatar_url,\n        username: obj.owner?.login,\n        content: obj.readme,\n        following: obj.following\n      }\n    },\n    moveSlider (slideNdx) {\n      const { slider, item } = this.$refs\n      const slideWidth = parseInt(\n        getComputedStyle(item).getPropertyValue('width'),\n        10\n      )\n      this.slideNdx = slideNdx\n      this.sliderPosition = (-(slideWidth * slideNdx))\n      slider.style.transform = `translateX(${this.sliderPosition}px)`\n    },\n    async loadReadme () {\n      this.loading = true\n      this.btnsShown = false\n      try {\n        await this.fetchReadmeForActiveSlide()\n      } catch (error) {\n        console.log(error)\n        throw error\n      } finally {\n        this.loading = false\n        this.btnsShown = true\n      }\n    },\n    async handleSlide (slideNdx) {\n      this.moveSlider(slideNdx)\n      await this.loadReadme()\n    },\n    async handleSlideOnProgressFinish (slideNdx) {\n      if (this.trendings.length !== slideNdx) {\n        this.moveSlider(slideNdx)\n        await this.loadReadme()\n      }\n    }\n  },\n  async mounted () {\n    if (this.initialSlide) {\n      const ndx = this.trendings.findIndex(\n        (item) => item.id === this.initialSlide\n      )\n      await this.handleSlide(ndx)\n    }\n    if (!this.trendings.length) {\n      await this.fetchTrendings()\n    }\n    await this.loadReadme()\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped src=\"./storiesSlider.scss\"></style>\n"],"sourceRoot":""}]}